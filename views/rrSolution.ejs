<%- include('./includes/head.ejs') %> <% let count=0; %> <% let total_tat=0; %>
<% let total_wt=0; %> <% let timeStamp=0; %>


<div class="container" style="overflow-x: auto;">
  <style>
    ::-webkit-scrollbar{
      height: 10px;
    }
    body{
      background-image: url("imgs/image.png");
    }
  #table tr:first-child td:first-child{
    border-top-left-radius: 20px;
  }
  #table tr:first-child th:last-child{
    border-top-right-radius: 20px;
  }
  #table tr:last-child td:last-child{
    border-bottom-right-radius: 20px;
  }
  #table tr:last-child td:first-child{
    border-bottom-left-radius: 20px;
  }
  </style>

<div style="width: 100%; display: inline-flex;">
  <div style="text-align: left;width: 0px; ">
    <button style="background: transparent; border: none; margin: 10px 0 0 10px;"><a href="/round-robin"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFUAAABVCAYAAAA49ahaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAErElEQVR4nO2c32scVRTHr9aqqH0t+iQmc860EUQoPvmj/gJp1UfFFx98Uqvoi9hChck5A2K1tUaxUKS2/ijaWH0q/irVf6CP0dDk3t1osFFBEQvVmNqVMxsxNt2QnZm9P3bvBw5hN8vcO989c3+ce84qFYlEIpFIJBKJRCKRSCQSCZvmSHatRrrHIG0zQK9poAMaeNwAfSZ/5bW8bzB/Uj4nn3fdZ+/4enN2mUn4AQO0TwNPGuRWt6aRvtXAb2rgrXI9NahMJflw2+P4pzJCriDwjwZ47ynIhtSgMJVkIwbpsEY6V6eYywx4QQO918Rsg+pXfrguu8oAjRrg+Z6KeRFxDfLYZLprneonplO6yyDPWhVzmdH3jYQ2q9BpqfE1Gjnr+aO++vH2nAZ6oaWyS1WITIxkl2ugI66F7GCfNK/PrlQhMZnuWmeATngg3kpee3xiJLtGBeOhSF+4Fm1VBvzVVDJ2hQpgDD3qXKxuPBboiNdjrExKxgOhSnjsTuUjslzxZZY33Xor8t8a87uVdxOT83UoV7Xv5m565WrlCxpptweitCob0EvKm718eyvYD6L+1Ug5da2pkuCIczGwTqN3nAo6PZwlvZicNNJZg/SBQTqogX+x66284DRsuBgPrfvGZpvAG/9tQyL7MonYFFYD73Ei6MlN+9fWHmAGnjMbMrywLQP0tGVR55ycIBRHILXeDP08Pcw3XqwtDfyITVELYZG22BcVaF99nkG/NiG7uWNbSB/bF5XfsKto23sma/LQ3wzSLZ3aaQA9Z1vQRfvGqqCLk0f1jgOf0Ui3dmrH9lj6f0+l83ooW29NVAP5vTV0+qwcs3RqQyejj8me3JWoYiv1r35RMX+qoofOG6D7O12/gaOPuha0+OITesKaqBro1UqCJvRgp2sboNsN0JRBNpUN6PeKT9Nua6Ia5LdLdvJ8I6WHbPVTgs8a6Blpt1R/gQ7Y9NSPynWSx611MrT+GuRjJT31eeUAjby95BBwzF4nQ/jml1D23My2pwYypo6v0Sk/G8qYGsjsz2cCmv1p20CsUyF/3Jqo7UznQdhR5XdaEzXu/XtE/0epaELZRnLsbcVTdcklXEVRX3ch6lZbkf8G8sO2RW2kdJ91UeUMpyhasHFGhRWjYt0/OadljWtd1OJmgff24KZmJUFjIE9T/yvbqT87RSP/URSkIR9yce4/g/kNyiUa+H2rN429NjqoXCN1SpKD5F4MrsNL5/VGBuUDBull54JgddNILypfkIIEqVMKWlCgGa/yU4UG5HcEm1IJvCDRMeUjUvhlXAtUymiH8hU5aDPAHwYm6OGWal2ifObkpv1rNfDnYTz2dML7OqqlE5dGOu5ctBVMI38ZTMXf0sq/dja0l4IeDa429YIxdqc3q4KiH7TD+zF01csttBsUWeadQDMG89tUX/4yBdKfdr2z2EKPBTd+dkMj5VQDv9vzIaF9/UPe7OVtcAqyIckfKALT9T7mpyUe6jx8576cnbZIjr2khJcTkybkTEmOQJxF7H1GD2XrpaJZEm7F4zTQW+1fUONPF39BTV7vkf9L3oDVFPJIJBKJRCKRSCQSiUQikYjqCf8AXw6PNjtO85cAAAAASUVORK5CYII="></a></button>
  </div>

  <div class="center" style="width: fit-content; margin-left: 350px;">
    <h1 class="headings" style="margin-top: 50px;">ROUND ROBIN</h1>
  </div>
</div>
  <div class="container" style="text-align: center">
    <form action="/round-robin" method="POST">
      <table class="table table-striped table-dark">
        <thead>
          <tr>
            <th scope="col">Process ID</th>
            <th scope="col">Process Name</th>
            <th scope="col">Arrival Time</th>
            <th scope="col">Burst Time</th>
            <th scope="col">Completion Time</th>
            <th scope="col">Turn Around Time</th>
            <th scope="col">Waiting Time</th>
          </tr>
        </thead>
        <tbody>
          <% for (var i=0; i < arr.length; i++) { %> <% total_tat=total_tat +
        arr[i].tat; %> <% total_wt=total_wt + arr[i].wt; %> <% count++ %>
          <tr>
            <td name="pId" id="pId"><%= arr[i].id %></td>
            <td name="pName" id="pName" style="color: #aaaaaa">P<%= (i+1) %></td>
            <td name="at" id="at"><%= arr[i].at %></td>
            <td name="bt" id="bt"><%= arr[i].bt %></td>
            <td name="bt" id="bt"><%= arr[i].ct %></td>
            <td name="tat" id="tat"><%= arr[i].tat %></td>
            <td name="wt" id="wt"><%= arr[i].wt %></td>
          </tr>
          <% } %>
          <table class="table table-striped table-dark">
            <th scope="col">Quantum</th>
            <td><%=quantum%></td>
            <th scope="col">Time Taken</th>
            <td name="time" id="time"><%= time %></td>
            <th scope="col">Average Turn Around Time</th>
            <td name="avg_tat"><%= (total_tat / count).toFixed(2) %></td>
            <th scope="col">Average Waiting Time</th>
            <td name="avg_tat"><%= (total_wt / count).toFixed(2) %></td>
            <td></td>
          </table>
        </tbody>
      </table>
    </form>
  </div>
  <h1 style="color: white; text-decoration: underline 2px #dd2682; text-underline-offset: 5px; margin-left:20px; margin-top: 75px; font-size: 50px; font-weight: 300;">Gantt Chart</h1>

  <div class="container" style="
    height: 175px;
    width: 100%;
    display: flex;
    align-items: center;
    text-align: center;
    display: flex;
  ">
    <table class="table table-striped table-dark" id="table">
      <tr>
        <td>PName</td>
        <% for(let i = 0; i<completedId.length; i++){ %>
        <th colspan="2" style="border-left: 1px solid #787878;"><%=completedId[i]%></th>
        <% } %>
      </tr>
      <tr style="border-bottom: black;">
        <td>Time</td>
        <% for(let i = 0; i<completedBT.length; i++){ %>
        <td style="border-left: 1px solid #787878; font-size: 15px; text-align: left; vertical-align: top; height: 100%; padding-top: 5px;"><%=timeStamp%></td>
        <% timeStamp=timeStamp+completedBT[i]; %>
        <td style=" font-size: 15px; text-align: right; vertical-align: top; height: 100%; padding-top: 5px;"><%=timeStamp%></td>
        <% } %>
      </tr>
    </table>
  </div>
</div>

<%- include('./includes/end.ejs') %>