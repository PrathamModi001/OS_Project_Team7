<%- include('./includes/head.ejs') %>

    <div class="center">
        <h1 class="headings">ROUND ROBIN</h1>
    </div>

    <div class="container">



        <form action="/round-robin" method="POST" id="myForm">
            Enter Quantum<input type="number" name="quantum" id="quantum" placeholder="Quantum" required="required">
            <table class="table table-striped table-dark" id="myTable">
                <thead>
                    <tr>
                        <th scope="col">Process ID</th>
                        <th scope="col">Arrival Time</th>
                        <th scope="col">Burst Time</th>
                        <th scope="col">Delete Row</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td> <input type="number" name="pId" id="pId" required="required"></td>
                        <td> <input type="number" name="at" id="at" required="required"></td>
                        <td> <input type="number" name="bt" id="bt" required="required"></td>
                        <td><button onclick="deleteRow(this)">Delete</button></td>
                    </tr>
                </tbody>
            </table>

            <div class="center">
                <button type="submit" class="b1">Calculate</button>
            </div>
        </form>

        <div class="center">
            <button class="b1" type="button" onclick="addRow()"> Add Row </button>
        </div>

        <script>

            // the logic for when if there is only one row you cannot submit the form.
            var form = document.getElementById("myForm");
            form.addEventListener("submit", function (event) {
                var table = document.getElementById("myTable");
                if (table.rows.length <= 2) {
                    alert("You must enter at least two processes to calculate.");
                    event.preventDefault(); // prevent form submission
                }
            });




            // the logic for adding a row and the logic for delete row button
            function addRow() {
                var table = document.getElementById("myTable");
                var newRow = table.insertRow(-1); // Add row at the end
                var pIdCell = newRow.insertCell(0);
                var atCell = newRow.insertCell(1);
                var btCell = newRow.insertCell(2);
                var buttonCell = newRow.insertCell(3);
                pIdCell.innerHTML = '<input type="text" name="pId" value="">';
                atCell.innerHTML = '<input type="text" name="at" value="">';
                btCell.innerHTML = '<input type="text" name="bt" value="">';
                var deleteButton = document.createElement("button");
                deleteButton.innerHTML = "Delete";
                deleteButton.onclick = function () {
                    deleteRow(this);
                };
                buttonCell.appendChild(deleteButton);
            }

            function deleteRow(btn) {
                var row = btn.parentNode.parentNode;
                row.parentNode.removeChild(row);
            }
        </script>

    </div>

    <!-- <div>
        <video autoplay muted loop id="myVideo">
            <source src="imgs/background.mp4" type="video/mp4">
        </video>
    </div> -->
    <%- include('./includes/end.ejs') %>